## Dev personal note

### âœ… **What We Built**

We successfully created a **REST API** using **Node.js + Express + TypeScript** that:

1. Accepts an Ethereum address as a query parameter.
2. Uses **`ethers.js`** and **Alchemy** to:

   - Fetch the **current gas price**
   - Get the **latest Ethereum block number**
   - Retrieve the **ETH balance** of the given address

3. Returns the data in a structured **JSON** response.
4. Is organized into **modular routes and services**, enabling future extensibility.

---

### âš™ï¸ **How We Achieved It**

#### âœ… **1. Project Setup**

- Created a backend folder inside the React project directory.
- Initialized with TypeScript and necessary dependencies:

  - `express`, `ethers`, `dotenv`
  - TypeScript and dev tools like `ts-node`, `nodemon`, `@types/express`

#### âœ… **2. Clean Code Structure**

- `src/routes/ethereum.ts` â€“ route handler
- `src/services/ethereumService.ts` â€“ blockchain logic
- `src/app.ts` â€“ app config
- `src/server.ts` â€“ server entry point

#### âœ… **3. Blockchain Integration**

- Used `ethers.JsonRpcProvider` with Alchemy RPC URL to interact with the Ethereum network.
- Retrieved:

  - Gas price â†’ `getGasPrice()`
  - Block number â†’ `getBlockNumber()`
  - Balance â†’ `getBalance(address)`

#### âœ… **4. Environment Config**

- Created a `.env` file to store the `ALCHEMY_URL` securely.
- Loaded via `dotenv.config()`.

---

### âŒ **Blockers & Workarounds**

| Blocker                                  | Explanation                                                                | Workaround                                                                      |
| ---------------------------------------- | -------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| ğŸ§© **Ethers v6 method mismatch**         | Many methods like `ethers.isAddress`, `formatEther`, etc. caused TS errors | We downgraded to **ethers v5** to match the exam requirements                   |
| ğŸ”— **Missing ESM module support**        | TypeScript with ESNext caused module resolution errors in Node.js          | Updated `tsconfig.json`: `"module": "NodeNext", "moduleResolution": "NodeNext"` |
| âš ï¸ **Module not found after build**      | Errors like `Cannot find module dist/app.js`                               | Ensured all source files were compiled and `paths` resolved correctly           |
| ğŸ”‘ **Alchemy/etherscan key not loading** | `process.env.ALCHEMY_URL` returned `undefined`                             | Verified `.env` was in the right place and used `dotenv` early in code          |
| ğŸš« **404 error on hitting endpoint**     | Server returned "Cannot GET /api/ethereum"                                 | Ensured correct route, method (GET), and base URL `/api/ethereum`               |

---

### ğŸ”„ **Future Extensibility**

- Code is modular with clear separation of concerns:

  - API logic in `routes/`
  - Blockchain logic in `services/`
